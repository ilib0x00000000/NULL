define(function(require){require("common");var a=require("./search"),c=null;$("#main").on("input",".js-search-ipt",function(){var h=this.value;if(""==h)return a.setSearchHistory(),!1;$(".js-search-area-prge");return c=setTimeout(function(){a.associative(h)},500),!1});var h=function(){var c=$("#main").find(".js-search-ipt").val();return""==c?void $.alert("请输入想搜索的内容"):void a.location(OP_CONFIG.$pager,c)},v=function(){var v=$(".js-search-area-prge");$(document).on("click",function(){v.hide()}),$("#main").on("focus",".js-search-ipt",function(c){var h=this.value;return""==h&&a.setSearchHistory(),c.preventDefault(),!1}).on("keyup",".js-search-ipt",function(e){this.value;13==e.keyCode&&"undefined"==typeof $(".js-moco-modal-cancel").html()&&h(),a.keyup(e.keyCode)}).on("keydown",".js-search-ipt",function(){clearTimeout(c)}).on("click",".js-search-ipt",function(a){return a.preventDefault(),!1}),$("#main").on("click",".js-search-btn",function(){h()}),$("#searchNav").on("click","a",function(c){var h=$(this).attr("data-page"),v=$("#main").find(".js-search-ipt").val();return a.location(h,v),c.preventDefault(),!1})};v()});